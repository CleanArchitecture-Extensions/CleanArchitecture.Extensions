
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Extensions ecosystem for Jason Taylor's Clean Architecture template.">
      
      
      
        <link rel="canonical" href="https://cleanarchitecture-extensions.github.io/CleanArchitecture.Extensions/extensions/core-result-primitives/">
      
      
        <link rel="prev" href="../core-guard-clauses/">
      
      
        <link rel="next" href="../validation/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.13">
    
    
      
        <title>Core Result Primitives - CleanArchitecture.Extensions</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e359304.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#core-result-primitives" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CleanArchitecture.Extensions" class="md-header__button md-logo" aria-label="CleanArchitecture.Extensions" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CleanArchitecture.Extensions
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Core Result Primitives
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/CleanArchitecture-Extensions/CleanArchitecture.Extensions" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CleanArchitecture-Extensions/CleanArchitecture.Extensions
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../roadmap/" class="md-tabs__link">
        
  
    
  
  Roadmap

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/quickstart/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../concepts/architecture-fit/" class="md-tabs__link">
          
  
  Concepts

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  Extensions Catalog

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../recipes/authentication/" class="md-tabs__link">
          
  
  Recipes

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../samples/" class="md-tabs__link">
        
  
    
  
  Samples

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../reference/configuration/" class="md-tabs__link">
        
  
    
  
  Reference

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../troubleshooting/" class="md-tabs__link">
        
  
    
  
  Troubleshooting

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../contributing/" class="md-tabs__link">
        
  
    
  
  Contributing

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../release-notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CleanArchitecture.Extensions" class="md-nav__button md-logo" aria-label="CleanArchitecture.Extensions" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    CleanArchitecture.Extensions
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/CleanArchitecture-Extensions/CleanArchitecture.Extensions" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    CleanArchitecture-Extensions/CleanArchitecture.Extensions
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../roadmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Roadmap
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Install
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Concepts
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/architecture-fit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Architecture Fit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/composition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Composition & Invariants
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Extensions Catalog
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Extensions Catalog
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-time/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-domain-events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Domain Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-logging-abstractions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Logging Abstractions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-pipeline-behaviors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Pipeline Behaviors
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core-guard-clauses/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Core Guard Clauses
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Core Result Primitives
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Core Result Primitives
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-the-template-already-covers" class="md-nav__link">
    <span class="md-ellipsis">
      What the template already covers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-the-core-result-primitives" class="md-nav__link">
    <span class="md-ellipsis">
      Why use the Core Result primitives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-surface-at-a-glance" class="md-nav__link">
    <span class="md-ellipsis">
      API surface at a glance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compatibility-and-migration-from-the-template" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility and migration from the template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-use-cases-backed-by-the-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Real-world use cases (backed by the sample)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-world use cases (backed by the sample)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-creating-a-project-with-guards-combine" class="md-nav__link">
    <span class="md-ellipsis">
      1) Creating a project with guards + Combine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-closing-a-project-with-bind-and-tap" class="md-nav__link">
    <span class="md-ellipsis">
      2) Closing a project with Bind and Tap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-mapping-results-to-http-responses" class="md-nav__link">
    <span class="md-ellipsis">
      3) Mapping results to HTTP responses
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-behavior-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed behavior notes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-patterns-and-guidance" class="md-nav__link">
    <span class="md-ellipsis">
      Usage patterns and guidance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently asked questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-adoption-plan" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-step adoption plan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-type-summaries" class="md-nav__link">
    <span class="md-ellipsis">
      Reference: Type summaries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-test-asserting-failures-and-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Example test: asserting failures and metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-docs" class="md-nav__link">
    <span class="md-ellipsis">
      Related docs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multitenancy-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multitenancy Core
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Recipes
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Recipes
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../recipes/caching/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Caching
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../samples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Samples
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../troubleshooting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-the-template-already-covers" class="md-nav__link">
    <span class="md-ellipsis">
      What the template already covers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-use-the-core-result-primitives" class="md-nav__link">
    <span class="md-ellipsis">
      Why use the Core Result primitives
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#api-surface-at-a-glance" class="md-nav__link">
    <span class="md-ellipsis">
      API surface at a glance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compatibility-and-migration-from-the-template" class="md-nav__link">
    <span class="md-ellipsis">
      Compatibility and migration from the template
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#real-world-use-cases-backed-by-the-sample" class="md-nav__link">
    <span class="md-ellipsis">
      Real-world use cases (backed by the sample)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Real-world use cases (backed by the sample)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-creating-a-project-with-guards-combine" class="md-nav__link">
    <span class="md-ellipsis">
      1) Creating a project with guards + Combine
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-closing-a-project-with-bind-and-tap" class="md-nav__link">
    <span class="md-ellipsis">
      2) Closing a project with Bind and Tap
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-mapping-results-to-http-responses" class="md-nav__link">
    <span class="md-ellipsis">
      3) Mapping results to HTTP responses
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#detailed-behavior-notes" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed behavior notes
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage-patterns-and-guidance" class="md-nav__link">
    <span class="md-ellipsis">
      Usage patterns and guidance
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#frequently-asked-questions" class="md-nav__link">
    <span class="md-ellipsis">
      Frequently asked questions
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#step-by-step-adoption-plan" class="md-nav__link">
    <span class="md-ellipsis">
      Step-by-step adoption plan
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reference-type-summaries" class="md-nav__link">
    <span class="md-ellipsis">
      Reference: Type summaries
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#example-test-asserting-failures-and-metadata" class="md-nav__link">
    <span class="md-ellipsis">
      Example test: asserting failures and metadata
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-docs" class="md-nav__link">
    <span class="md-ellipsis">
      Related docs
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="core-result-primitives">Core Result Primitives<a class="headerlink" href="#core-result-primitives" title="Permanent link">&para;</a></h1>
<p>The Core extension ships a richer <code>Result</code> model than the one inside Jason Taylor’s Clean Architecture template. This page explains what the template provides today, why the extension adds more, how to use the upgraded primitives, and how to adopt them incrementally without fighting the template’s MediatR-centric structure.</p>
<h2 id="what-the-template-already-covers">What the template already covers<a class="headerlink" href="#what-the-template-already-covers" title="Permanent link">&para;</a></h2>
<p>Jason’s template keeps the built-in result type intentionally small so new projects stay approachable:
- <code>src/Application/Common/Models/Result.cs</code> exposes <code>bool Succeeded</code> plus <code>string[] Errors</code>, with static <code>Success()</code> and <code>Failure(IEnumerable&lt;string&gt;)</code>.
- It is used mainly by the Identity layer (<code>Infrastructure/Identity/IdentityResultExtensions.cs</code> converts <code>IdentityResult</code> to <code>Result</code>; <code>IdentityService.DeleteUserAsync</code> returns it). Commands/queries typically return view models or primitives directly, not <code>Result</code>.
- MediatR pipeline behaviors (<code>LoggingBehaviour</code>, <code>UnhandledExceptionBehaviour</code>, <code>AuthorizationBehaviour</code>, <code>ValidationBehaviour</code>, <code>PerformanceBehaviour</code>) assume exceptions for failures (e.g., FluentValidation throws <code>ValidationException</code>), not a rich result envelope.
- There is no explicit place for trace/correlation IDs. Logging relies on <code>ILogger&lt;T&gt;</code> scopes populated by <code>IUser</code>/<code>IIdentityService</code> rather than a result metadata contract.
- Errors are unstructured strings; you cannot attach error codes, metadata, or machine-readable details without inventing your own type downstream.</p>
<p>That minimalism works for demos and small features, but it leaves gaps once you need consistent error shapes, correlation-friendly diagnostics, or functional composition across handlers.</p>
<h2 id="why-use-the-core-result-primitives">Why use the Core Result primitives<a class="headerlink" href="#why-use-the-core-result-primitives" title="Permanent link">&para;</a></h2>
<p>The extension keeps the success/failure semantics but adds the capabilities teams routinely need in production:
- <strong>Traceability:</strong> <code>Result</code> and <code>Error</code> carry an optional <code>TraceId</code> so handlers and web APIs can preserve request/operation identifiers without leaking logging concerns into business code.
- <strong>Structured errors:</strong> <code>Error</code> holds <code>Code</code>, <code>Message</code>, and optional <code>Metadata</code> (key/value) to capture domain facts (e.g., constraints, limits, offending values) in a machine-readable way.
- <strong>Value payloads:</strong> <code>Result&lt;T&gt;</code> wraps successful values, avoiding parallel DTOs for “maybe failed” responses.
- <strong>Composition:</strong> Helpers like <code>Map</code>, <code>Bind</code>, <code>Tap</code>, <code>Ensure</code>, <code>Recover</code>, and <code>Combine</code> let you chain operations without nested <code>if</code> blocks or exception gymnastics.
- <strong>Guard synergy:</strong> Guard clauses in the same package can emit <code>Result&lt;T&gt;</code> with trace IDs and error codes, giving you a uniform contract from validation through handler to API.
- <strong>Testability:</strong> Deterministic results and errors make it easy to assert flows without depending on logging side effects or exception throwing.
- <strong>Interop:</strong> You can adapt the template’s <code>Result</code> (strings) into the richer <code>Result</code>/<code>Error</code> shape and back, enabling gradual adoption.</p>
<h2 id="api-surface-at-a-glance">API surface at a glance<a class="headerlink" href="#api-surface-at-a-glance" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Types:</strong> <code>Result</code>, <code>Result&lt;T&gt;</code>, and <code>Error</code> live in <code>CleanArchitecture.Extensions.Core.Results</code>.</li>
<li><strong>Creation:</strong> <code>Result.Success(traceId?)</code>, <code>Result.Success&lt;T&gt;(value, traceId?)</code>, <code>Result.Failure(error|errors, traceId?)</code>, <code>Result.Failure&lt;T&gt;(...)</code>.</li>
<li><strong>Inspection:</strong> <code>IsSuccess</code>, <code>IsFailure</code>, <code>Errors</code>, <code>TraceId</code>, <code>Value</code>, <code>ValueOrDefault</code>.</li>
<li><strong>Composition:</strong> </li>
<li><code>Result&lt;T&gt;.Map(Func&lt;T, TResult&gt;)</code> and <code>Bind(Func&lt;T, Result&lt;TResult&gt;&gt;)</code></li>
<li><code>Result&lt;T&gt;.Tap(Action&lt;T&gt;)</code> for side effects on success</li>
<li><code>Result&lt;T&gt;.Ensure(predicate, error)</code> to enforce additional invariants</li>
<li><code>ResultExtensions.Ensure(predicate, error)</code> for non-generic results</li>
<li><code>Result.Combine(params Result[])</code> to aggregate multiple checks</li>
<li><code>ResultExtensions.Recover(fallback)</code> to supply a fallback value on failure</li>
<li><code>ResultExtensions.ToResult()</code> to wrap raw values</li>
<li><strong>Errors:</strong> <code>Error</code> exposes <code>Code</code>, <code>Message</code>, optional <code>TraceId</code>, <code>Metadata</code>, <code>HasMetadata</code>, and helpers <code>WithTraceId(...)</code>, <code>WithMetadata(key, value)</code>.</li>
</ul>
<h2 id="compatibility-and-migration-from-the-template">Compatibility and migration from the template<a class="headerlink" href="#compatibility-and-migration-from-the-template" title="Permanent link">&para;</a></h2>
<p>You can start with the template’s existing patterns and layer Core Results gradually:
- <strong>Mapping template → Core:</strong> <code>Result.Success()</code> becomes <code>Result.Success(traceId)</code>; <code>Result.Failure(strings)</code> can be projected to <code>Result.Failure(strings.Select(s =&gt; new Error("identity", s)))</code> or use <code>LegacyResult.Failure(strings).ToResult(traceId)</code>.
- <strong>Mapping Core → template:</strong> <code>Result.Success(traceId)</code> can return <code>CleanArchitecture.Application.Common.Models.Result.Success()</code> or <code>LegacyResult.FromResult(result)</code>. Failures can flatten via <code>Errors.Select(e =&gt; $"{e.Code}: {e.Message}")</code> or rely on the adapter’s default formatter.
- <strong>Handlers:</strong> Keep return types as your feature needs (DTOs, primitives). Introduce <code>Result&lt;T&gt;</code> where you want richer errors without throwing. You can adopt it per handler; nothing requires a big bang change.
- <strong>Pipelines:</strong> Core Results do not change pipeline signatures; they work with the template’s behaviors. Validation that throws still bubbles through <code>UnhandledExceptionBehaviour</code>; you can prefer guard/result composition to avoid exceptions when appropriate.</p>
<h2 id="real-world-use-cases-backed-by-the-sample">Real-world use cases (backed by the sample)<a class="headerlink" href="#real-world-use-cases-backed-by-the-sample" title="Permanent link">&para;</a></h2>
<p>A runnable solution lives at <code>samples/CleanArchitecture.Extensions.Core.Result.Sample</code>. It keeps Jason’s <code>IApplicationDbContext</code> style while exercising Core Results in a <code>Projects</code> feature.</p>
<h3 id="1-creating-a-project-with-guards-combine">1) Creating a project with guards + <code>Combine</code><a class="headerlink" href="#1-creating-a-project-with-guards-combine" title="Permanent link">&para;</a></h3>
<p><code>samples/CleanArchitecture.Extensions.Core.Result.Sample/src/Application/Projects/Commands/CreateProject/CreateProject.cs</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">Handle</span><span class="p">(</span><span class="n">CreateProjectCommand</span><span class="w"> </span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">CancellationToken</span><span class="w"> </span><span class="n">cancellationToken</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="p">{</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">traceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guid</span><span class="p">.</span><span class="n">NewGuid</span><span class="p">().</span><span class="n">ToString</span><span class="p">(</span><span class="s">&quot;N&quot;</span><span class="p">);</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">guardOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GuardOptions</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">TraceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">traceId</span><span class="w"> </span><span class="p">};</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guard</span><span class="p">.</span><span class="n">AgainstNullOrWhiteSpace</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="k">nameof</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Name</span><span class="p">),</span><span class="w"> </span><span class="n">guardOptions</span><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="w">        </span><span class="p">.</span><span class="n">Ensure</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">n</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">MaxNameLength</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;projects.name.length&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">$&quot;Project name must be {MaxNameLength} characters or fewer.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">));</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a>
<a id="__codelineno-0-9" name="__codelineno-0-9" href="#__codelineno-0-9"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">description</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guard</span><span class="p">.</span><span class="n">Ensure</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Description</span><span class="w"> </span><span class="k">is</span><span class="w"> </span><span class="k">null</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">Description</span><span class="p">.</span><span class="n">Length</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">MaxDescriptionLength</span><span class="p">,</span>
<a id="__codelineno-0-10" name="__codelineno-0-10" href="#__codelineno-0-10"></a><span class="w">        </span><span class="s">&quot;projects.description.length&quot;</span><span class="p">,</span>
<a id="__codelineno-0-11" name="__codelineno-0-11" href="#__codelineno-0-11"></a><span class="w">        </span><span class="s">$&quot;Description must be {MaxDescriptionLength} characters or fewer.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-12" name="__codelineno-0-12" href="#__codelineno-0-12"></a><span class="w">        </span><span class="n">guardOptions</span><span class="p">);</span>
<a id="__codelineno-0-13" name="__codelineno-0-13" href="#__codelineno-0-13"></a>
<a id="__codelineno-0-14" name="__codelineno-0-14" href="#__codelineno-0-14"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">budget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guard</span><span class="p">.</span><span class="n">Ensure</span><span class="p">(</span><span class="n">request</span><span class="p">.</span><span class="n">Budget</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span>
<a id="__codelineno-0-15" name="__codelineno-0-15" href="#__codelineno-0-15"></a><span class="w">        </span><span class="s">&quot;projects.budget.range&quot;</span><span class="p">,</span>
<a id="__codelineno-0-16" name="__codelineno-0-16" href="#__codelineno-0-16"></a><span class="w">        </span><span class="s">&quot;Budget cannot be negative.&quot;</span><span class="p">,</span>
<a id="__codelineno-0-17" name="__codelineno-0-17" href="#__codelineno-0-17"></a><span class="w">        </span><span class="n">guardOptions</span><span class="p">);</span>
<a id="__codelineno-0-18" name="__codelineno-0-18" href="#__codelineno-0-18"></a>
<a id="__codelineno-0-19" name="__codelineno-0-19" href="#__codelineno-0-19"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">validation</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Combine</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">description</span><span class="p">,</span><span class="w"> </span><span class="n">budget</span><span class="p">);</span>
<a id="__codelineno-0-20" name="__codelineno-0-20" href="#__codelineno-0-20"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">validation</span><span class="p">.</span><span class="n">IsFailure</span><span class="p">)</span>
<a id="__codelineno-0-21" name="__codelineno-0-21" href="#__codelineno-0-21"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-0-22" name="__codelineno-0-22" href="#__codelineno-0-22"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Failure</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">validation</span><span class="p">.</span><span class="n">Errors</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-0-23" name="__codelineno-0-23" href="#__codelineno-0-23"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-24" name="__codelineno-0-24" href="#__codelineno-0-24"></a>
<a id="__codelineno-0-25" name="__codelineno-0-25" href="#__codelineno-0-25"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">project</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Project</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">Value</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">Description</span><span class="p">,</span><span class="w"> </span><span class="n">request</span><span class="p">.</span><span class="n">Budget</span><span class="p">);</span>
<a id="__codelineno-0-26" name="__codelineno-0-26" href="#__codelineno-0-26"></a>
<a id="__codelineno-0-27" name="__codelineno-0-27" href="#__codelineno-0-27"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">duplicateName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">Projects</span>
<a id="__codelineno-0-28" name="__codelineno-0-28" href="#__codelineno-0-28"></a><span class="w">        </span><span class="p">.</span><span class="n">AnyAsync</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">project</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span><span class="w"> </span><span class="n">cancellationToken</span><span class="p">);</span>
<a id="__codelineno-0-29" name="__codelineno-0-29" href="#__codelineno-0-29"></a>
<a id="__codelineno-0-30" name="__codelineno-0-30" href="#__codelineno-0-30"></a><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">duplicateName</span><span class="p">)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31" href="#__codelineno-0-31"></a><span class="w">    </span><span class="p">{</span>
<a id="__codelineno-0-32" name="__codelineno-0-32" href="#__codelineno-0-32"></a><span class="w">        </span><span class="kt">var</span><span class="w"> </span><span class="n">duplicateError</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;projects.name.duplicate&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;A project with this name already exists.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">)</span>
<a id="__codelineno-0-33" name="__codelineno-0-33" href="#__codelineno-0-33"></a><span class="w">            </span><span class="p">.</span><span class="n">WithMetadata</span><span class="p">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">project</span><span class="p">.</span><span class="n">Name</span><span class="p">);</span>
<a id="__codelineno-0-34" name="__codelineno-0-34" href="#__codelineno-0-34"></a>
<a id="__codelineno-0-35" name="__codelineno-0-35" href="#__codelineno-0-35"></a><span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Failure</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">duplicateError</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-0-36" name="__codelineno-0-36" href="#__codelineno-0-36"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-0-37" name="__codelineno-0-37" href="#__codelineno-0-37"></a>
<a id="__codelineno-0-38" name="__codelineno-0-38" href="#__codelineno-0-38"></a><span class="w">    </span><span class="n">_context</span><span class="p">.</span><span class="n">Projects</span><span class="p">.</span><span class="n">Add</span><span class="p">(</span><span class="n">project</span><span class="p">);</span>
<a id="__codelineno-0-39" name="__codelineno-0-39" href="#__codelineno-0-39"></a><span class="w">    </span><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">(</span><span class="n">cancellationToken</span><span class="p">);</span>
<a id="__codelineno-0-40" name="__codelineno-0-40" href="#__codelineno-0-40"></a>
<a id="__codelineno-0-41" name="__codelineno-0-41" href="#__codelineno-0-41"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Success</span><span class="p">(</span><span class="n">project</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-0-42" name="__codelineno-0-42" href="#__codelineno-0-42"></a><span class="p">}</span>
</code></pre></div>
- <code>GuardOptions.TraceId</code> seeds correlation on every guard failure and success.
- <code>Result.Combine</code> keeps the handler branch-free until all synchronous validations run.
- Errors capture metadata (<code>name</code>) before returning <code>Result&lt;int&gt;</code> to the caller.</p>
<h3 id="2-closing-a-project-with-bind-and-tap">2) Closing a project with <code>Bind</code> and <code>Tap</code><a class="headerlink" href="#2-closing-a-project-with-bind-and-tap" title="Permanent link">&para;</a></h3>
<p><code>samples/CleanArchitecture.Extensions.Core.Result.Sample/src/Application/Projects/Commands/CloseProject/CloseProject.cs</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="kt">var</span><span class="w"> </span><span class="n">closeResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guard</span><span class="p">.</span><span class="n">AgainstNull</span><span class="p">(</span><span class="n">project</span><span class="p">,</span><span class="w"> </span><span class="k">nameof</span><span class="p">(</span><span class="n">project</span><span class="p">),</span><span class="w"> </span><span class="n">guardOptions</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="w">    </span><span class="p">.</span><span class="n">Bind</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">EnsureNotClosed</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">))</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="w">    </span><span class="p">.</span><span class="n">Tap</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Close</span><span class="p">(</span><span class="n">DateTimeOffset</span><span class="p">.</span><span class="n">UtcNow</span><span class="p">));</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">closeResult</span><span class="p">.</span><span class="n">IsFailure</span><span class="p">)</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="p">{</span>
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Failure</span><span class="p">(</span><span class="n">closeResult</span><span class="p">.</span><span class="n">Errors</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a><span class="p">}</span>
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a><span class="k">await</span><span class="w"> </span><span class="n">_context</span><span class="p">.</span><span class="n">SaveChangesAsync</span><span class="p">(</span><span class="n">cancellationToken</span><span class="p">);</span>
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a><span class="k">return</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Success</span><span class="p">(</span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a><span class="k">static</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="w"> </span><span class="n">EnsureNotClosed</span><span class="p">(</span><span class="n">Project</span><span class="w"> </span><span class="n">project</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="w"> </span><span class="n">traceId</span><span class="p">)</span>
<a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a><span class="p">{</span>
<a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">project</span><span class="p">.</span><span class="n">IsClosed</span>
<a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a><span class="w">        </span><span class="o">?</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Failure</span><span class="o">&lt;</span><span class="n">Project</span><span class="o">&gt;</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;projects.closed&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Project is already closed.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">),</span><span class="w"> </span><span class="n">traceId</span><span class="p">)</span>
<a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a><span class="w">        </span><span class="p">:</span><span class="w"> </span><span class="n">CoreResults</span><span class="p">.</span><span class="n">Result</span><span class="p">.</span><span class="n">Success</span><span class="p">(</span><span class="n">project</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a><span class="p">}</span>
</code></pre></div>
- <code>Bind</code> short-circuits if the entity is missing or already closed.
- <code>Tap</code> performs the side effect (marking the project closed) without losing the trace ID.</p>
<h3 id="3-mapping-results-to-http-responses">3) Mapping results to HTTP responses<a class="headerlink" href="#3-mapping-results-to-http-responses" title="Permanent link">&para;</a></h3>
<p><code>samples/CleanArchitecture.Extensions.Core.Result.Sample/src/Application/Projects/Queries/GetProjectById/GetProjectById.cs</code> and <code>samples/CleanArchitecture.Extensions.Core.Result.Sample/src/Web/Endpoints/Projects.cs</code>:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="c1">// Query handler</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="kt">var</span><span class="w"> </span><span class="n">projectResult</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Guard</span><span class="p">.</span><span class="n">AgainstNull</span><span class="p">(</span><span class="n">project</span><span class="p">,</span><span class="w"> </span><span class="k">nameof</span><span class="p">(</span><span class="n">project</span><span class="p">),</span><span class="w"> </span><span class="n">guardOptions</span><span class="p">);</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="k">return</span><span class="w"> </span><span class="n">projectResult</span><span class="p">.</span><span class="n">Map</span><span class="p">(</span><span class="n">p</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ProjectSummaryDto</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="p">{</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="w">    </span><span class="n">Id</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Id</span><span class="p">,</span>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a><span class="w">    </span><span class="n">Name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Name</span><span class="p">,</span>
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a><span class="w">    </span><span class="n">Budget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">Budget</span><span class="p">,</span>
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a><span class="w">    </span><span class="n">IsClosed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">IsClosed</span><span class="p">,</span>
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a><span class="w">    </span><span class="n">ClosedOn</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">ClosedOn</span>
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="p">},</span><span class="w"> </span><span class="n">traceId</span><span class="p">);</span>
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a>
<a id="__codelineno-2-13" name="__codelineno-2-13" href="#__codelineno-2-13"></a><span class="c1">// Minimal API endpoint</span>
<a id="__codelineno-2-14" name="__codelineno-2-14" href="#__codelineno-2-14"></a><span class="k">public</span><span class="w"> </span><span class="k">async</span><span class="w"> </span><span class="n">Task</span><span class="o">&lt;</span><span class="n">IResult</span><span class="o">&gt;</span><span class="w"> </span><span class="n">GetProjectById</span><span class="p">(</span><span class="n">ISender</span><span class="w"> </span><span class="n">sender</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">id</span><span class="p">)</span>
<a id="__codelineno-2-15" name="__codelineno-2-15" href="#__codelineno-2-15"></a><span class="p">{</span>
<a id="__codelineno-2-16" name="__codelineno-2-16" href="#__codelineno-2-16"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">await</span><span class="w"> </span><span class="n">sender</span><span class="p">.</span><span class="n">Send</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">GetProjectByIdQuery</span><span class="p">(</span><span class="n">id</span><span class="p">));</span>
<a id="__codelineno-2-17" name="__codelineno-2-17" href="#__codelineno-2-17"></a>
<a id="__codelineno-2-18" name="__codelineno-2-18" href="#__codelineno-2-18"></a><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">Match</span><span class="o">&lt;</span><span class="n">IResult</span><span class="o">&gt;</span><span class="p">(</span>
<a id="__codelineno-2-19" name="__codelineno-2-19" href="#__codelineno-2-19"></a><span class="w">        </span><span class="n">project</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">TypedResults</span><span class="p">.</span><span class="n">Ok</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">project</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">result</span><span class="p">.</span><span class="n">TraceId</span><span class="w"> </span><span class="p">}),</span>
<a id="__codelineno-2-20" name="__codelineno-2-20" href="#__codelineno-2-20"></a><span class="w">        </span><span class="n">_</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">ToProblemResult</span><span class="p">(</span><span class="s">&quot;Project not found.&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">result</span><span class="p">,</span><span class="w"> </span><span class="n">StatusCodes</span><span class="p">.</span><span class="n">Status404NotFound</span><span class="p">));</span>
<a id="__codelineno-2-21" name="__codelineno-2-21" href="#__codelineno-2-21"></a><span class="p">}</span>
</code></pre></div>
- <code>Map</code> preserves the guard trace ID when projecting to a DTO.
- <code>Match</code> produces consistent HTTP payloads with structured errors + <code>traceId</code>.</p>
<h2 id="detailed-behavior-notes">Detailed behavior notes<a class="headerlink" href="#detailed-behavior-notes" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Trace IDs:</strong> If you pass a trace ID into <code>Result.Success</code> or <code>Result.Failure</code>, it will be copied into contained errors (or derived from the first error when not provided). Combine also prefers the first non-empty trace ID it finds.</li>
<li><strong>Error metadata:</strong> Use <code>WithMetadata</code> to attach machine-readable context (e.g., offending parameter, limit, current balance). Metadata is left untouched unless you clone the error.</li>
<li><strong>Value access:</strong> <code>Result&lt;T&gt;.Value</code> throws on failure to prevent accidental use; prefer <code>ValueOrDefault</code> when you deliberately ignore failures (rare) or <code>Match</code> for explicit branching.</li>
<li><strong>Recover:</strong> When you want a fallback without losing errors, <code>Recover</code> converts failure into success with a derived value (and carries the original trace ID). Useful for caching or default projections.</li>
<li><strong>Thread safety:</strong> Results are immutable; the error list is wrapped in <code>ReadOnlyCollection&lt;Error&gt;</code>. You can safely pass results across tasks without extra locking.</li>
</ul>
<h2 id="usage-patterns-and-guidance">Usage patterns and guidance<a class="headerlink" href="#usage-patterns-and-guidance" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Prefer <code>Result&lt;T&gt;</code> at boundaries:</strong> Commands/queries that are exposed to external callers benefit most because you can return rich, predictable errors to API controllers, background jobs, or message handlers.</li>
<li><strong>Keep exceptions for truly exceptional cases:</strong> Domain validation, guard failures, and expected business rule violations should return <code>Result</code>; infrastructure failures (DB down, unexpected null) can still throw to be caught by <code>UnhandledExceptionBehaviour</code> or global middleware.</li>
<li><strong>Name your error codes consistently:</strong> Use domain-prefixed codes (<code>billing.credit-limit</code>, <code>cart.empty</code>, <code>user.not-found</code>) so clients and observability tools can filter/search easily.</li>
<li><strong>Propagate correlation:</strong> When you have a correlation ID in <code>ILogContext</code> or HTTP headers, pass it into your first <code>Result</code> creation so all downstream errors carry it. The pipeline behaviors in Core keep <code>ILogContext</code> hydrated.</li>
<li><strong>Compose before persisting:</strong> Use <code>Combine</code> to gather errors before calling repositories. This keeps persistence logic free of partial states.</li>
<li><strong>Testing:</strong> Assert on <code>IsSuccess/IsFailure</code>, <code>Errors.Count</code>, and <code>TraceId</code>. For pipelines, pair <code>InMemoryAppLogger</code> with <code>ILogContext</code> to assert correlation + timing alongside result flows.</li>
</ul>
<h2 id="frequently-asked-questions">Frequently asked questions<a class="headerlink" href="#frequently-asked-questions" title="Permanent link">&para;</a></h2>
<ul>
<li><strong>Do I have to return <code>Result</code> from every handler?</strong> No. Use it where you want structured errors and correlation in your contract. You can mix <code>Result&lt;T&gt;</code> handlers with plain DTO-returning handlers.</li>
<li><strong>Will this break the template’s pipeline behaviors?</strong> No. All behaviors keep the same generic signatures. You can register Core behaviors in the same order as the template’s behaviors to preserve semantics.</li>
<li><strong>How do I integrate with FluentValidation?</strong> You can keep FluentValidation throwing <code>ValidationException</code> (caught by middleware) or map validation failures into <code>Result</code> by projecting <code>ValidationFailure</code> into <code>Error</code> inside handlers/behaviors.</li>
<li><strong>Can I log errors automatically?</strong> Yes—hook your logger adapter to inspect <code>Result</code> failures and emit logs enriched by <code>TraceId</code> and <code>Metadata</code>. The Core logging abstractions keep this decoupled from MediatR.</li>
</ul>
<h2 id="step-by-step-adoption-plan">Step-by-step adoption plan<a class="headerlink" href="#step-by-step-adoption-plan" title="Permanent link">&para;</a></h2>
<p>1) <strong>Add the package</strong> and register Core pipeline behaviors (Correlation, Logging, Performance) plus <code>IClock</code>, <code>ILogContext</code>, and logger adapters.
2) <strong>Wrap new handlers</strong> that benefit from structured errors in <code>Result&lt;T&gt;</code>; start with operations exposed to external clients or sensitive domains (payments, identity).
3) <strong>Introduce guards</strong> as the first layer in handlers to replace ad-hoc <code>if</code>/throws. Configure <code>GuardStrategy</code> globally via <code>CoreExtensionsOptions</code>.
4) <strong>Unify error codes</strong> across teams; codify them in a shared static class or constants to avoid drift.
5) <strong>Bridge Identity/legacy flows</strong> with adapters so you can defer broader refactors while gaining correlation and metadata where you need it.</p>
<h2 id="reference-type-summaries">Reference: Type summaries<a class="headerlink" href="#reference-type-summaries" title="Permanent link">&para;</a></h2>
<ul>
<li><code>Result</code>: success/failure envelope, trace ID, immutable <code>IReadOnlyList&lt;Error&gt;</code>. Factory methods and <code>Combine</code>.</li>
<li><code>Result&lt;T&gt;</code>: extends <code>Result</code> with <code>Value</code>, <code>ValueOrDefault</code>, <code>Map</code>, <code>Bind</code>, <code>Tap</code>, <code>Ensure</code>, <code>Match</code>, and overrides <code>Failure</code> factories to attach trace IDs.</li>
<li><code>Error</code>: structured error data with helpers to clone metadata or trace IDs; <code>None</code> sentinel for convenience.</li>
<li><code>ResultExtensions</code>: <code>Ensure</code> for non-generic results, <code>ToResult</code> wrappers, and <code>Recover</code>.</li>
</ul>
<h2 id="example-test-asserting-failures-and-metadata">Example test: asserting failures and metadata<a class="headerlink" href="#example-test-asserting-failures-and-metadata" title="Permanent link">&para;</a></h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="na">[Fact]</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="k">public</span><span class="w"> </span><span class="k">void</span><span class="w"> </span><span class="nf">Recover_ReturnsFallbackOnFailure</span><span class="p">()</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="p">{</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">error</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Error</span><span class="p">(</span><span class="s">&quot;billing.credit-limit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Insufficient credit&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">traceId</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;req-42&quot;</span><span class="p">);</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Result</span><span class="p">.</span><span class="n">Failure</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">error</span><span class="p">);</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="w">    </span><span class="kt">var</span><span class="w"> </span><span class="n">recovered</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">failed</span><span class="p">.</span><span class="n">Recover</span><span class="p">(</span><span class="n">errors</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">errors</span><span class="p">.</span><span class="n">Count</span><span class="p">);</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">    </span><span class="n">recovered</span><span class="p">.</span><span class="n">IsSuccess</span><span class="p">.</span><span class="n">Should</span><span class="p">().</span><span class="n">BeTrue</span><span class="p">();</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">    </span><span class="n">recovered</span><span class="p">.</span><span class="n">Value</span><span class="p">.</span><span class="n">Should</span><span class="p">().</span><span class="n">Be</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a><span class="w">    </span><span class="n">recovered</span><span class="p">.</span><span class="n">TraceId</span><span class="p">.</span><span class="n">Should</span><span class="p">().</span><span class="n">Be</span><span class="p">(</span><span class="s">&quot;req-42&quot;</span><span class="p">);</span>
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a><span class="p">}</span>
</code></pre></div>
<h2 id="related-docs">Related docs<a class="headerlink" href="#related-docs" title="Permanent link">&para;</a></h2>
<ul>
<li><a href="../core/">Core extension overview</a> for guard clauses, pipeline behaviors, logging, time, and domain events.</li>
<li><a href="../validation/">Validation extension</a> when you need FluentValidation-first behaviors that complement or replace guard/result flows.</li>
</ul>







  
    
  
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">December 7, 2025</span>
  </span>

    
    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.tracking", "content.code.copy", "content.tabs.link", "search.suggest", "search.highlight"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.c8d2eff1.min.js"></script>
      
    
  </body>
</html>